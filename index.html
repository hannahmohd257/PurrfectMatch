<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Purrfect Match ğŸ±</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  <h1>Purrfect Match ğŸ±</h1>
</header>

<div class="container">

  <!-- Swipe View -->
  <div id="swipeView">
    <div class="card">
      <img id="catImage" />
      <!-- Heart Popup -->
      <div id="heartPopup" class="heartPopup">â¤ï¸</div>
      <!-- Liked Cats Button -->
      <button id="likesBtn" onclick="showLikes()" class="likesButton">â¤ï¸ Liked Cats</button>
    </div>
  </div>

  <!-- Liked Cats View -->
  <div id="likesView" class="hidden">
    <h2>Liked Cats â¤ï¸</h2>
    <div class="gallery" id="gallery"></div>
    <button onclick="back()" class="backButton">â¬… Back</button>
  </div>

</div>

<script>
const catImage = document.getElementById("catImage");
const swipeView = document.getElementById("swipeView");
const likesView = document.getElementById("likesView");
const gallery = document.getElementById("gallery");

let startX = 0;
let endX = 0;

// Load a random cat image
function loadCat() {
  catImage.src = "https://cataas.com/cat?width=400&height=400&random=" + Date.now();
}

// Like a cat
function like() {
  showHeartPopup();
  let likedCats = JSON.parse(localStorage.getItem("likedCats")) || [];
  likedCats.push(catImage.src);
  localStorage.setItem("likedCats", JSON.stringify(likedCats));
  loadCat();
}

// Dislike a cat
function dislike() {
  loadCat();
}

// Show heart popup briefly
function showHeartPopup() {
  const heart = document.getElementById("heartPopup");
  heart.style.transform = "translate(-50%, -50%) scale(1)";
  heart.style.opacity = 1;
  setTimeout(() => {
    heart.style.transform = "translate(-50%, -50%) scale(0)";
    heart.style.opacity = 0;
  }, 500);
}

// Touch events
catImage.addEventListener("touchstart", e => { startX = e.touches[0].clientX; });
catImage.addEventListener("touchend", e => { endX = e.changedTouches[0].clientX; handleSwipe(); });

// Mouse events
catImage.addEventListener("mousedown", e => { startX = e.clientX; });
catImage.addEventListener("mouseup", e => { endX = e.clientX; handleSwipe(); });

// Handle swipe logic
function handleSwipe() {
  const diff = endX - startX;
  if (diff > 80) swipeAnimation(300, like);       // Swipe right
  else if (diff < -80) swipeAnimation(-300, dislike); // Swipe left
}

// Animate swipe
function swipeAnimation(distance, callback) {
  catImage.style.transform = `translateX(${distance}px) rotate(${distance/10}deg)`;
  catImage.style.opacity = 0;
  setTimeout(() => {
    catImage.style.transform = "";
    catImage.style.opacity = 1;
    callback();
  }, 300);
}

// Show liked cats view
function showLikes() {
  swipeView.classList.add("hidden");
  likesView.classList.remove("hidden");
  renderLikes();
}

// Back to swipe view
function back() {
  likesView.classList.add("hidden");
  swipeView.classList.remove("hidden");
}

// Render liked cats gallery
function renderLikes() {
  gallery.innerHTML = "";
  const likedCats = JSON.parse(localStorage.getItem("likedCats")) || [];
  likedCats.forEach(url => {
    const img = document.createElement("img");
    img.src = url;
    img.className = "galleryImg";
    gallery.appendChild(img);
  });
}

// Initial load
loadCat();
</script>

</body>
</html>
